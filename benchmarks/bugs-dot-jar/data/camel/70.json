{
    "bug_id": 70,
    "classification": {
        "singleLine": false
    },
    "commit": "93935780",
    "failing_tests": [
        "org.apache.camel.component.seda.SedaRemoveRouteThenAddItAgainTest"
    ],
    "files": 2,
    "jira_id": "5432",
    "linesAdd": 19,
    "linesRem": 7,
    "nb_error": 0,
    "nb_failure": 1,
    "nb_skipped": 1,
    "nb_test": 4242,
    "patch": "diff --git a/camel-core/src/main/java/org/apache/camel/component/seda/SedaEndpoint.java b/camel-core/src/main/java/org/apache/camel/component/seda/SedaEndpoint.java\nindex 5b2d8724b7..e33d21de85 100644\n--- a/camel-core/src/main/java/org/apache/camel/component/seda/SedaEndpoint.java\n+++ b/camel-core/src/main/java/org/apache/camel/component/seda/SedaEndpoint.java\n@@ -85,7 +85,7 @@ public SedaComponent getComponent() {\n     }\n \n     public Producer createProducer() throws Exception {\n-        return new SedaProducer(this, getQueue(), getWaitForTaskToComplete(), getTimeout(), isBlockWhenFull());\n+        return new SedaProducer(this, getWaitForTaskToComplete(), getTimeout(), isBlockWhenFull());\n     }\n \n     public Consumer createConsumer(Processor processor) throws Exception {\ndiff --git a/camel-core/src/main/java/org/apache/camel/component/seda/SedaProducer.java b/camel-core/src/main/java/org/apache/camel/component/seda/SedaProducer.java\nindex d39e39f722..361446080a 100644\n--- a/camel-core/src/main/java/org/apache/camel/component/seda/SedaProducer.java\n+++ b/camel-core/src/main/java/org/apache/camel/component/seda/SedaProducer.java\n@@ -32,6 +32,10 @@\n  * @version \n  */\n public class SedaProducer extends DefaultAsyncProducer {\n+    /**\n+     * @deprecated Better make use of the {@link SedaEndpoint#getQueue()} API which delivers the accurate reference to the queue currently being used.\n+     */\n+    @Deprecated\n     protected final BlockingQueue<Exchange> queue;\n     private final SedaEndpoint endpoint;\n     private final WaitForTaskToComplete waitForTaskToComplete;\n@@ -39,17 +43,24 @@\n     private final boolean blockWhenFull;\n \n     /**\n-     * @deprecated use the other constructor\n+     * @deprecated Use {@link #SedaProducer(SedaEndpoint, WaitForTaskToComplete, long, boolean) the other constructor}.\n      */\n     @Deprecated\n     public SedaProducer(SedaEndpoint endpoint, BlockingQueue<Exchange> queue, WaitForTaskToComplete waitForTaskToComplete, long timeout) {\n-        this(endpoint, queue, waitForTaskToComplete, timeout, false);\n+        this(endpoint, waitForTaskToComplete, timeout, false);\n+    }\n+\n+    /**\n+     * @deprecated Use {@link #SedaProducer(SedaEndpoint, WaitForTaskToComplete, long, boolean) the other constructor}.\n+     */\n+    @Deprecated\n+    public SedaProducer(SedaEndpoint endpoint, BlockingQueue<Exchange> queue, WaitForTaskToComplete waitForTaskToComplete, long timeout, boolean blockWhenFull) {\n+        this(endpoint, waitForTaskToComplete, timeout, blockWhenFull);\n     }\n \n-    public SedaProducer(SedaEndpoint endpoint, BlockingQueue<Exchange> queue, WaitForTaskToComplete waitForTaskToComplete,\n-                        long timeout, boolean blockWhenFull) {\n+    public SedaProducer(SedaEndpoint endpoint, WaitForTaskToComplete waitForTaskToComplete, long timeout, boolean blockWhenFull) {\n         super(endpoint);\n-        this.queue = queue;\n+        this.queue = endpoint.getQueue();\n         this.endpoint = endpoint;\n         this.waitForTaskToComplete = waitForTaskToComplete;\n         this.timeout = timeout;\n@@ -125,7 +136,7 @@ public String toString() {\n                 if (!done) {\n                     exchange.setException(new ExchangeTimedOutException(exchange, timeout));\n                     // remove timed out Exchange from queue\n-                    queue.remove(copy);\n+                    endpoint.getQueue().remove(copy);\n                     // count down to indicate timeout\n                     latch.countDown();\n                 }\n@@ -183,6 +194,7 @@ protected void doStop() throws Exception {\n      * @param exchange the exchange to add to the queue\n      */\n     protected void addToQueue(Exchange exchange) {\n+        BlockingQueue<Exchange> queue = endpoint.getQueue();\n         if (blockWhenFull) {\n             try {\n                 queue.put(exchange);\n",
    "project": "camel"
}