{
    "bug_id": 71,
    "classification": {
        "singleLine": false
    },
    "commit": "238ce8aa",
    "failing_tests": [
        "org.apache.logging.log4j.core.layout.RFC5424LayoutTest"
    ],
    "files": 1,
    "jira_id": "430",
    "linesAdd": 2,
    "linesRem": 1,
    "nb_error": 0,
    "nb_failure": 1,
    "nb_skipped": 8,
    "nb_test": 493,
    "patch": "diff --git a/log4j-core/src/main/java/org/apache/logging/log4j/core/layout/RFC5424Layout.java b/log4j-core/src/main/java/org/apache/logging/log4j/core/layout/RFC5424Layout.java\nindex e7aff72a1..e26fa4d1a 100644\n--- a/log4j-core/src/main/java/org/apache/logging/log4j/core/layout/RFC5424Layout.java\n+++ b/log4j-core/src/main/java/org/apache/logging/log4j/core/layout/RFC5424Layout.java\n@@ -324,7 +324,8 @@ private void appendMessageId(final StringBuilder buffer, final Message message)\n \n     private void appendMessage(final StringBuilder buffer, final LogEvent event) {\n         final Message message = event.getMessage();\n-        final String text = message.getFormat();\n+        // This layout formats StructuredDataMessages instead of delegating to the Message itself.\n+        final String text = (message instanceof StructuredDataMessage) ? message.getFormat() : message.getFormattedMessage();\n \n         if (text != null && text.length() > 0) {\n             buffer.append(\" \").append(escapeNewlines(text, escapeNewLine));\n",
    "project": "logging-log4j2"
}